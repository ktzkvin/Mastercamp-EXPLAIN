{% extends 'myapp/base.html' %}

{% block title %}Classification Result{% endblock %}


{% block content %}
<section id="result" class="intro">
<div class ="result-container">
<h1>Classification Result</h1>
<p><strong>Patent:</strong> {{ classification_result.patent.application_number }}</p>
<p><strong>Predicted Category:</strong> {{ classification_result.predicted_category }}</p>
<p><strong>Explanation:</strong></p>
<div id="explanation">
    <pre>
    {{ classification_result.explanation }}
    </pre>
</div>

<h2>Feedback</h2>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit Feedback</button>
</form>
    </div>
    </section>
{% endblock %}

{% block extra_head %}
{% load static %}
    <link rel="stylesheet" href="{% static 'css/result.css' %}">
<script>
    // Exemple de code JavaScript pour surligner les segments de texte influents
    document.addEventListener('DOMContentLoaded', function () {
        const explanation = JSON.parse('{{ classification_result.explanation|escapejs }}');
        explanation.forEach(segment => {
            // Implémenter la logique de surlignement ici
            // Par exemple, utiliser une bibliothèque comme highlight.js ou simplement ajouter des spans avec des styles spécifiques
        });
    });
</script>
{% endblock %}
